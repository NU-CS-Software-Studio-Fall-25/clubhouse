<div class="app-container py-4">
  <div class="d-flex justify-content-between align-items-start mb-4">
    <div>
      <h1 class="h2 text-northwestern-purple mb-1"><%= @club.name %> Members</h1>
      <p class="text-muted mb-0"><%= pluralize(@members.count, "member") %> in this club</p>
    </div>
    <%= link_to "Back to Club", club_path(@club), class: "btn btn-outline-secondary" %>
  </div>

  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <%= form_with url: members_club_path(@club), method: :get, local: true, class: "row g-2 align-items-end" do |form| %>
        <div class="col-md-8">
          <%= form.label :q, "Search members", class: "form-label" %>
          <%= form.text_field :q, value: @member_query, class: "form-control", placeholder: "Enter a name..." %>
        </div>
        <div class="col-md-4 d-flex gap-2">
          <%= form.submit "Search", class: "btn btn-northwestern-purple flex-grow-1" %>
          <% if @member_query.present? %>
            <%= link_to "Clear", members_club_path(@club), class: "btn btn-outline-secondary flex-grow-1" %>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>

  <% if @members.any? %>
    <div class="card shadow-sm">
      <div class="list-group list-group-flush">
        <% @members.each do |member| %>
          <div class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <strong><%= member.name %></strong>
              <% if member.email.present? %>
                <div class="text-muted small"><%= member.email %></div>
              <% end %>
            </div>
            <% if member == @club.user %>
              <span class="badge bg-northwestern-purple text-white">Owner</span>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  <% else %>
    <% if @member_query.present? %>
      <div class="alert alert-warning mb-0">No members match "<%= @member_query %>".</div>
    <% else %>
      <div class="alert alert-info mb-0">No members have joined this club yet.</div>
    <% end %>
  <% end %>
</div>
